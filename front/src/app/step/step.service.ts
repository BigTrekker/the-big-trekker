import { Injectable } from '@angular/core';
import { Observable, of, BehaviorSubject } from 'rxjs';
import { Step } from './step';

@Injectable({
  providedIn: 'root'
})
export class StepService {

  private TEST_STEPS: Array<Step> = [
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment, Hello, this is a sample second comment, Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    }/*,
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment, Hello, this is a sample second comment, Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment, Hello, this is a sample second comment, Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment, Hello, this is a sample second comment, Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment, Hello, this is a sample second comment, Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment, Hello, this is a sample second comment, Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment, Hello, this is a sample second comment, Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654167,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960582,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562685,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654191,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960590,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562689,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },
    {
        latitude: 45.7503391,
        longitude: 4.8654168,
        authorName: "James Brown",
        date: new Date(2019, 0, 1),
        message: "Hello, this is a sample first comment",
    },
    {
        latitude: 45.7350647,
        longitude: 4.8960587,
        authorName: "James Brown",
        date: new Date(2019, 0, 3),
        message: "Hello, this is a sample second comment",
    },
    {
        latitude: 45.7583341,
        longitude: 4.9562686,
        authorName: "Tom Jones",
        date: new Date(2019, 0, 8),
        message: "Hello, this is a sample third comment",
    },*/
  ];

  private hoveringStep$: BehaviorSubject<number|null> = new BehaviorSubject(null);
  private selectedStep$: BehaviorSubject<number|null> = new BehaviorSubject(null);

  getSteps(): Observable<Step[]> {
    // TODO: use Http
    return of(this.TEST_STEPS);
  }

  setHoveringStep(index: number|null) {
    this.hoveringStep$.next(index);
  }

  setSelectedStep(index: number|null) {
    this.selectedStep$.next(index);
  }

  getHoveringStep(): Observable<number|null> {
    return this.hoveringStep$.asObservable();
  }

  getSelectedStep(): Observable<number|null> {
    return this.selectedStep$.asObservable();
  }
}
